# Aioha

> All-In-One Hive Authentication


## docs

Aioha (All-In-One Hive Authentication) is an API that provides a common interface for working with different Hive login providers. This allows easier integration of Hive login and transacting on the network with fewer code.

- [Introduction](/docs.md): Aioha (All-In-One Hive Authentication) is an API that provides a common interface for working with different Hive login providers. This allows easier integration of Hive login and transacting on the network with fewer code.

### category

- [Core API](/docs/category/core-api.md): The base library for Aioha.

### core

- [Custom Provider](/docs/core/custom-provider.md): Besides the built-in providers, a custom defined provider that extends AiohaBaseProvider class may be registered as Providers.Custom provider. This may be useful for backend use or development of another browser provider.
- [Get Started](/docs/core/get-started.md): Aioha core may be installed through npm or imported through CDN using ES6 module import syntax.
- [JSON-RPC Interface](/docs/core/jsonrpc.md): The EIP-1193 style JSON-RPC API for Hive wallet providers outlined in this page are implemented in Aioha. These are designed to be platform and transport agnostic.
- [Usage](/docs/core/usage.md): Configure and use Aioha in 5 minutes or less.
- [Wax Signer](/docs/core/wax.md): Aioha may be used to sign transactions on Wax Typescript library.

### faq

1. Why is plaintext private key login not supported?

- [FAQ](/docs/faq.md): 1. Why is plaintext private key login not supported?

### framework

Framework-specific libraries that provide Aioha reactive states for ease of integration.

- [Framework Libraries](/docs/framework.md): Framework-specific libraries that provide Aioha reactive states for ease of integration.
- [Lit Provider](/docs/framework/lit.md): Lit provider for Aioha that uses Lit's context to provide reactive states in your Lit Element components.
- [React Provider](/docs/framework/react.md): For React apps that are not using the ready-made UI.
- [Svelte Provider](/docs/framework/svelte.md): Svelte provider for Aioha that uses Svelte's context API to provide reactive states in your Svelte components.
- [Vue Provider](/docs/framework/vue.md): Vue provider for Aioha that uses Vue's provide/inject to provide reactive states in your Vue components.

### media

Branding

- [Media Resources](/docs/media.md): Branding

### react

- [React UI](/docs/react/ui.md): Opinionated React modal UI for Hive logins through Aioha, styled using Tailwind CSS. This provides a quick and easy way to bootstrap a React web app with ready to use Aioha-powered modal component.

### ui

Ready made modal containing all the UI components and logic required for Aioha.

- [Ready Made UI](/docs/ui.md): Ready made modal containing all the UI components and logic required for Aioha.
- [Lit UI](/docs/ui/lit.md): Opinionated Lit modal UI for Hive logins through Aioha, styled using Tailwind CSS. This provides a quick and easy way to bootstrap a Lit web app with ready to use Aioha-powered modal component.
- [Web Components](/docs/ui/web-components.md): The ready made modal UI is available as a framework agnostic web component that can be integrated on vanilla HTML/JS or any web framework.


---

# Full Documentation Content

# Introduction

Aioha (All-In-One Hive Authentication) is an API that provides a common interface for working with different Hive login providers. This allows easier integration of [Hive](https://hive.io) login and transacting on the network with fewer code.

Aioha is designed for use in browser contexts and can be used through a variety of different ways:

1. [**Core API**](/docs/category/core-api.md)

This is the base library containing the inner workings of Aioha. It provides the APIs needed to interact with different Hive login providers, all within one or two lines of code. Recommended when flexibility is important.

2. [**Framework Libraries**](#supported-frameworks)

These are libraries that provide framework-specific conveniences for integrating Aioha. Optionally includes all the UI logic required for an Aioha-powered Hive login modal. Best for most developers.

3. [**Wax Signer**](/docs/core/wax.md)

Aioha can be used as a transaction signer for applications powered by [Wax Typescript](https://gitlab.syncad.com/hive/wax/-/tree/develop/ts?ref_type=heads).

## Supported Providers[‚Äã](#supported-providers "Direct link to Supported Providers")

* [Keychain](https://hive-keychain.com)
* [HiveAuth](https://hiveauth.com)
* [HiveSigner](https://hivesigner.com)
* [Ledger](https://hiveledger.io)
* [Peak Vault](https://vault.peakd.com)
* [MetaMask Snap](https://snaps.metamask.io/snap/npm/hiveio/metamask-snap)

## Supported Frameworks[‚Äã](#supported-frameworks "Direct link to Supported Frameworks")

* Universal Web Components ([Ready Made UI](/docs/ui/web-components.md))
* Lit ([Provider](/docs/framework/lit.md), [Ready Made UI](/docs/ui/lit.md))
* React ([Provider](/docs/framework/react.md), [Ready Made UI](/docs/react/ui.md))
* Vue ([Provider](/docs/framework/vue.md))
* Svelte ([Provider](/docs/framework/svelte.md))

## Feature Matrix[‚Äã](#feature-matrix "Direct link to Feature Matrix")

| Feature                     | Peak Vault | Keychain | HiveAuth | HiveSigner | Ledger | MetaMask |
| --------------------------- | ---------- | -------- | -------- | ---------- | ------ | -------- |
| Login                       | ‚úÖ         | ‚úÖ       | ‚úÖ       | ‚úÖ1        | ‚úÖ     | ‚úÖ7      |
| Discover accounts           | ‚ùå         | ‚ùå       | ‚ùå       | ‚ùå         | ‚úÖ     | ‚úÖ       |
| Memo encryption             | ‚úÖ         | ‚úÖ       | ‚ùå4      | ‚ùå         | ‚ùå     | ‚úÖ       |
| Memo decryption             | ‚úÖ         | ‚úÖ       | ‚ùå5      | ‚úÖ2        | ‚ùå     | ‚úÖ       |
| Sign message                | ‚úÖ         | ‚úÖ       | ‚úÖ       | ‚ùå         | ‚úÖ     | ‚ùå       |
| Sign tx (without broadcast) | ‚úÖ         | ‚úÖ       | ‚ùå3      | ‚ùå         | ‚úÖ     | ‚úÖ       |
| Sign tx (with broadcast)    | ‚úÖ         | ‚úÖ       | ‚úÖ       | ‚úÖ         | ‚úÖ     | ‚úÖ       |
| Sign HF26 serialized tx     | ‚ùå         | ‚ùå       | ‚ùå       | ‚ùå         | ‚ùå6    | ‚úÖ       |
| Transact using owner auth   | ‚ùå         | ‚ùå       | ‚ùå       | ‚úÖ         | ‚úÖ     | ‚úÖ       |

1 A HiveSigner access token will be returned instead of an ECDSA signature.<br />2 Memo must be encrypted using `@hivesigner`'s public posting key.<br />3 While technically supported by the provider, the PKSA generates the transaction headers instead of using supplied values. This is unhelpful for signing multisig transactions.<br />4 Developer claims to be possible however this is not documented anywhere therefore not implemented in Aioha.<br />5 Only available in protocol 1.0 that doesn't seem to be deployed therefore not implemented in Aioha.<br />6 Possible with blind signing, however this is not implemented in Aioha.<br />7 No signatures will be created, an empty result will be returned.

## Local Storage Reserved Keys[‚Äã](#local-storage-reserved-keys "Direct link to Local Storage Reserved Keys")

Aioha uses certain keys in browser `localStorage` to store persistent logins, and in the case of HiveSigner provider, pass info from callback URL.

warning

Do **not** modify any values for the local storage keys below outside Aioha core and HiveSigner callback page.

The following keys are reserved:

* General: `aiohaUsername`, `aiohaProvider`, `aiohaPubKey`, `aiohaOtherLogins`
* HiveAuth: `hiveauthToken`, `hiveauthKey`, `hiveauthExp`
* HiveSigner: `hivesignerTxId`, `hivesignerToken`, `hivesignerExpiry`, `hivesignerUsername`
* Ledger: `ledgerPath`
* MetaMask: `mmHiveSnapAccIdx`


---

## [üìÑÔ∏è<!-- --> <!-- -->Get Started](/docs/core/get-started.md)

[Aioha core may be installed through npm or imported through CDN using ES6 module import syntax.](/docs/core/get-started.md)


---

# Custom Provider

Besides the [built-in providers](/docs.md#supported-providers), a custom defined provider that extends [`AiohaBaseProvider` class](https://github.com/aioha-hive/aioha/blob/main/src/providers/provider.ts) may be registered as `Providers.Custom` provider. This may be useful for backend use or development of another browser provider.

## Usage[‚Äã](#usage "Direct link to Usage")

The below demonstrates the registration of plaintext private key provider for use in Aioha. This is a common example of backend usage of Aioha.

```
import { Aioha, Providers } from '@aioha/aioha'
import { PlaintextKeyProvider } from '@aioha/aioha/build/providers/custom/plaintext.js'

const aioha = new Aioha()
aioha.registerCustomProvider(new PlaintextKeyProvider('5somethingsomething'))

// Login as usual
const login = await aioha.login(Providers.Custom, 'your-username', { msg: 'Hello World' })

// Claim rewards
const claim = await aioha.claimRewards()
console.log(claim)
```


---

# Get Started

Aioha core may be installed through npm or imported through CDN using ES6 module import syntax.

## NPM Installation[‚Äã](#npm-installation "Direct link to NPM Installation")

* npm
* yarn
* pnpm

```
npm i @aioha/aioha
```

```
yarn add @aioha/aioha
```

```
pnpm i @aioha/aioha
```

## CDN Import[‚Äã](#cdn-import "Direct link to CDN Import")

index.html

```
<script type="module">
  import { initAioha } from 'https://unpkg.com/@aioha/aioha@latest/dist/bundle.js'
</script>
```

## Usage Example[‚Äã](#usage-example "Direct link to Usage Example")

Instantiating Aioha, logging in and transacting on Hive can be done with just one or two lines of code for each task. Most configuration are provider-specific.

```
import { initAioha, Asset, KeyTypes, Providers } from '@aioha/aioha'

// Instantiation
const aioha = initAioha({
  hiveauth: {
    name: 'Aioha',
    description: 'Aioha test app'
  },
  hivesigner: {
    app: 'ipfsuploader.app',
    callbackURL: window.location.origin + '/hivesigner.html',
    scope: ['login', 'vote']
  }
})

// Get registered providers
console.log(aioha.getProviders())

// Get current logged in user and provider name
if (aioha.isLoggedIn()) {
  console.log(aioha.getCurrentUser(), aioha.getCurrentProvider())
}

// Login with provider
const login = await aioha.login(Providers.Keychain, 'hiveusername', {
  msg: 'Hello World',
  keyType: KeyTypes.Posting
})

// Transfer 1 HIVE using logged in provider
const xfer = await aioha.transfer('recipient', 1, Asset.HIVE, 'Transferred using Aioha with memo')

// Vote comment with 100% weight
const vote = await aioha.vote('author', 'permlink', 10000)

// Claim rewards
const rewardClaim = await aioha.claimRewards()
```

## HiveSigner Callback Page[‚Äã](#hivesigner-callback-page "Direct link to HiveSigner Callback Page")

HiveSigner provider requires a callback page that stores the login and transaction results into `localStorage` which is then used as callback data for the application. The function is included in [`src/lib/hivesigner-cb.ts`](https://github.com/aioha-hive/aioha/blob/main/src/lib/hivesigner-cb.ts) file in Aioha core and may be used as such:

* CDN
* NPM Module

```
<script type="module">
  import { hivesignerCb } from 'https://unpkg.com/@aioha/aioha@latest/dist/hivesigner-cb.js'
  hivesignerCb()
</script>
```

```
import { hivesignerCb } from '@aioha/aioha/build/lib/hivesigner-cb'

hivesignerCb()
```

## Polyfills[‚Äã](#polyfills "Direct link to Polyfills")

When using Aioha with bundlers such as Webpack or Vite, you may need to add some polyfills for it to work correctly.

* Webpack
* Vite

webpack.config.cjs

```
const { DefinePlugin, ProvidePlugin } = require('webpack')

module.exports = {
  // ...
  resolve: {
    // ...
    fallback: {
      url: false,
      buffer: require.resolve('buffer/')
    }
  },
  plugins: [
    // ...
    new DefinePlugin({
      'process.env.NODE_DEBUG': false
    }),
    new ProvidePlugin({
      Buffer: ['buffer', 'Buffer']
    })
  ]
}
```

vite.config.ts

```
import { defineConfig } from 'vite'
import { nodePolyfills } from 'vite-plugin-node-polyfills'

export default defineConfig({
  // ...
  define: {
    'process.env.NODE_DEBUG': false
  },
  plugins: [
    // ...
    nodePolyfills({
      globals: {
        Buffer: true
      }
    })
  ]
})
```

## Chunking[‚Äã](#chunking "Direct link to Chunking")

To keep the main bundle as lightweight as possible, enable chunking (or code splitting) in your bundler if not already by default.

* Webpack

webpack.config.cjs

```
module.exports = {
  // ...
  optimization: {
    splitChunks: {
      name: (module, chunks, cacheGroupKey) => {
        const allChunksNames = chunks.map((chunk) => chunk.name).join('-')
        return allChunksNames
      }
    }
  }
}
```


---

# JSON-RPC Interface

The [EIP-1193 style](https://eips.ethereum.org/EIPS/eip-1193) JSON-RPC API for Hive wallet providers outlined in this page are implemented in Aioha. These are designed to be platform and transport agnostic.

Any RPC methods not defined here shall be redirected to a Hive API node.

## Aioha RPC Errors[‚Äã](#aioha-rpc-errors "Direct link to Aioha RPC Errors")

For every RPC method, the error returned (if any) shall follow the convention below:

```
{
  "message": "human readable error message",
  "code": 4001
}
```

The error code returned are as follows, for Aioha-specific errors:

info

The application may use the error codes to provide a localized message to be displayed to the user.

| Error Code | Name                    | Description                                                              |
| ---------- | ----------------------- | ------------------------------------------------------------------------ |
| 4001       | User Rejected Request   | The user rejected the request.                                           |
| 4002       | Request Expired         | The request has expired.                                                 |
| 4100       | Unauthorized            | The requested method and/or account has not been authorized by the user. |
| 4200       | Unsupported Method      | The requested method is not supported.                                   |
| 4201       | Unsupported Provider    | The requested provider is not supported or registered.                   |
| 4900       | Disconnected            | The provider is disconnected.                                            |
| 4901       | Already connected       | Account connection has already been established with the provider.       |
| 5000       | Unknown Error           | Unknown error occurred while serving the request.                        |
| 5001       | Extension Not Found     | The required browser extension is not installed.                         |
| 5002       | Missing Username        | Username is required.                                                    |
| 5003       | Missing/Invalid Options | Valid options are required.                                              |
| 5004       | Invalid Memo            | Memo must start with a #.                                                |
| 5005       | Unsupported Key Type    | Chosen key type is not supported for the requested operation.            |
| 5200       | Nothing To Do           | There are no actions required to complete the request.                   |
| 5201       | Invalid Account Auth    | Could not add/remove itself to/from account auth.                        |
| 5900       | Connection Error        | Failed to establish connection to the device.                            |
| 5901       | Unassociated User       | Username is not associated with the device.                              |
| 5902       | Discovery Error         | Failed to search accounts associated with the device.                    |
| 5903       | Signature Request Error | Failed to obtain message/transaction signature from the device.          |
| 5904       | Hash signing disabled   | Hash signing is not enabled on the device.                               |

## Usage[‚Äã](#usage "Direct link to Usage")

```
import { initAioha, Providers } from '@aioha/aioha'
import { AiohaJsonRpc } from '@aioha/aioha/build/extras/jsonrpc-request.js'

const aioha = initAioha()
const rpc = new AiohaJsonRpc(aioha)

// Login as usual
const login = await aioha.login(Providers.Custom, 'your-username', { msg: 'Hello World' })

// Make an RPC request
// This is shown for reference, ideally Wax should be used for Hive RPC client
const result = await rpc.request({
  method: 'database_api.get_dynamic_global_properties',
  params: {}
})

// Listen to an event
rpc.on('connect', () => console.log('connected'))
// or directly through Aioha instance
aioha.on('connect', () => console.log('connected'))
```

## Aioha RPC Methods[‚Äã](#aioha-rpc-methods "Direct link to Aioha RPC Methods")

### Decrypt Memo[‚Äã](#decrypt-memo "Direct link to Decrypt Memo")

* Request
* Result

```
{
  "method": "aioha_api.decrypt_memo",
  "params": {
    "message": "#9RdpW9b7nfmdzipLJSZVQpcnpR3ipygGZg9DyxQZgBkbztb3NXBhSVKZJRLMs42KdcwUfHTkCWHpiGxTzR3jFfuaoY274chw3DyR16R2Esn5dMtw2Sa2Eh2W8EDochfiBKFmxAGauZRZChWz9Z5AmkS",
    "key_type": "posting"
  }
}
```

string

```
#Hello World
```

### Sign Message[‚Äã](#sign-message "Direct link to Sign Message")

* Request
* Result

```
{
  "method": "aioha_api.sign_message",
  "params": {
    "message": "Hello World",
    "key_type": "posting"
  }
}
```

object

```
{
  "signature": "2020647841097bca7d9e84c39df209ac2df9b42c5b194ee2a690304ce8c140690f5296566b5da0ae9d9950243871bf17fa26b34b671dc8284bf7fba767958a5508",
  "public_key": "STM5jruaymFQ93jwUp15r9SF5wPeaNvRKFE4nbbJv4vfHCk5a6zRu"
}
```

### Sign Transaction[‚Äã](#sign-transaction "Direct link to Sign Transaction")

* Request
* Result

```
{
  "method": "aioha_api.sign_tx",
  "params": {
    "tx": {
      "ref_block_num": 27912,
      "ref_block_prefix": 1175138206,
      "expiration": "2024-06-07T10:23:57",
      "operations": [
        [
          "transfer",
          {
            "from": "randomvlogs",
            "to": "randomvlogs",
            "amount": "0.001 HIVE",
            "memo": "Aioha Test"
          }
        ]
      ],
      "extensions": []
    },
    "key_type": "posting"
  }
}
```

object

```
{
  "ref_block_num": 27912,
  "ref_block_prefix": 1175138206,
  "expiration": "2024-06-07T10:23:57",
  "operations": [
    [
      "transfer",
      {
        "from": "randomvlogs",
        "to": "randomvlogs",
        "amount": "0.001 HIVE",
        "memo": "Aioha Test"
      }
    ]
  ],
  "extensions": [],
  "signatures": [
    "20469faba4c128ef41c4e444ef5422e88ed9397d43a7c9713a8e59c170de45eea539b63ced8f4ff048442bdcca3b96848f6f740e655c971f9cae00b54535c8eea0"
  ]
}
```

### Sign and Broadcast Transaction[‚Äã](#sign-and-broadcast-transaction "Direct link to Sign and Broadcast Transaction")

* Request
* Result

```
{
  "method": "aioha_api.sign_and_broadcast_tx",
  "params": {
    "ops": [
      ["vote", {
        "author": "sagarkothari88",
        "permlink": "2024-06-05-daily-updates-from-sagarkothari88",
        "voter": "techcoderx",
        "weight": 10000
      }]
    ],
    "key_type": "posting"
  }
}
```

string

```
87c10767531071732fe15e6c34cf275900c342a3
```

### Get Registered Providers[‚Äã](#get-registered-providers "Direct link to Get Registered Providers")

* Request
* Result

```
{
  "method": "aioha_api.get_registered_providers",
  "params": {}
}
```

array

```
["keychain", "peakvault", "ledger", "hiveauth", "hivesigner"]
```

### Get Current Provider[‚Äã](#get-current-provider "Direct link to Get Current Provider")

* Request
* Result

```
{
  "method": "aioha_api.get_current_provider",
  "params": {}
}
```

string

```
hiveauth
```

### Get Current User[‚Äã](#get-current-user "Direct link to Get Current User")

* Request
* Result

```
{
  "method": "aioha_api.get_current_user",
  "params": {}
}
```

string

```
aioha
```

### Is Logged In[‚Äã](#is-logged-in "Direct link to Is Logged In")

* Request
* Result

```
{
  "method": "aioha_api.is_logged_in",
  "params": {}
}
```

boolean

```
true
```

### Is Provider Registered[‚Äã](#is-provider-registered "Direct link to Is Provider Registered")

* Request
* Result

```
{
  "method": "aioha_api.is_provider_registered",
  "params": {
    "enabled": true
  }
}
```

boolean

```
true
```

## Events[‚Äã](#events "Direct link to Events")

Aioha provides several methods for listening to events:

* `aioha.on(eventName, callback)`: Register a callback to listen for an event. The callback will be called every time the event occurs until explicitly unregistered.
* `aioha.once(eventName, callback)`: Register a callback to listen for an event only once. The callback will be automatically unregistered after being called.
* `aioha.off(eventName, callback)`: Unregister a specific callback for an event. If no callback is provided, all callbacks for the event will be unregistered.

### Connected[‚Äã](#connected "Direct link to Connected")

The `connect` event is emitted every time an account has been successfully authenticated, resulting in a transition from a **disconnected** state to a **connected** state.

```
aioha.on('connect', () => void)
```

### Disconnected[‚Äã](#disconnected "Direct link to Disconnected")

The `disconnect` event is emitted every time an account was logged out and no accounts remain active.

```
aioha.on('disconnect', () => void)
```

### Account Changed[‚Äã](#account-changed "Direct link to Account Changed")

The `account_changed` event is emitted every time the current logged in accounts changes, under the following circumstances:

1. Another account has been added on top of the existing connected account
2. The connected account has been changed from one previously authenticated account to another
3. An account has been disconnected while leaving another account remain connected.
4. A connected but inactive account has been removed.

```
aioha.on('account_changed', () => void)
```

### Login Request[‚Äã](#login-request "Direct link to Login Request")

The `login_request` event is emitted every time a login request has been made to the user's wallet (excluding HiveAuth, see [below](#hiveauth-login-request)).

```
aioha.on('login_request', () => void)
```

### Memo Request[‚Äã](#memo-request "Direct link to Memo Request")

The `memo_request` event is emitted every time a memo encryption or decryption request has been made to the user's wallet.

```
aioha.on('memo_request', () => void)
```

### Message Signature Request[‚Äã](#message-signature-request "Direct link to Message Signature Request")

The `sign_msg_request` event is emitted every time a message signature request has been made to the user's wallet.

```
aioha.on('sign_msg_request', () => void)
```

### Transaction Signature Request[‚Äã](#transaction-signature-request "Direct link to Transaction Signature Request")

The `sign_tx_request` event is emitted every time a transaction signature request has been made to the user's wallet.

```
aioha.on('sign_tx_request', () => void)
```

### HiveAuth Login Request[‚Äã](#hiveauth-login-request "Direct link to HiveAuth Login Request")

The `hiveauth_login_request` event is emitted every time a new HiveAuth login request is created. This event contains the payload needed to display a QR code to be scanned using a HiveAuth compatible PKSA. Login request may be cancelled before timeout by calling `cancel()`.

```
aioha.on('hiveauth_login_request', (payload: string, evt: MessageType, cancel: () => void) => void)
```

### HiveAuth Challenge Request[‚Äã](#hiveauth-challenge-request "Direct link to HiveAuth Challenge Request")

The `hiveauth_challenge_request` event is emitted every time a new HiveAuth message signature request is created. Challenge request may be cancelled before timeout by calling `cancel()`.

```
aioha.on('hiveauth_challenge_request', (payload: string, evt: MessageType, cancel: () => void) => void)
```

### HiveAuth Sign Transaction Request[‚Äã](#hiveauth-sign-transaction-request "Direct link to HiveAuth Sign Transaction Request")

The `hiveauth_sign_request` event is emitted every time a new HiveAuth transaction signature request is created. Signature request may be cancelled before timeout by calling `cancel()`.

```
aioha.on('hiveauth_sign_request', (payload: string, evt: MessageType, cancel: () => void) => void)
```


---

# Usage

Configure and use Aioha in 5 minutes or less.

## Instantiation[‚Äã](#instantiation "Direct link to Instantiation")

Create an instance of Aioha. All providers are registered by default excluding HiveSigner, which is only registered when HiveSigner config is specified. This step also loads any persistent logins stored in `localStorage` (if available). Returns an `Aioha` object.

Provider-specific configs are **optional** with exception of HiveSigner which is required to register HiveSigner provider.

```
import { initAioha, Asset, KeyTypes, Providers, VscStakeType } from '@aioha/aioha'

const aioha = initAioha({
  hiveauth: {
    name: 'Aioha',
    description: 'Aioha test app'
  },
  hivesigner: {
    app: 'ipfsuploader.app',
    callbackURL: window.location.origin + '/hivesigner.html',
    scope: ['login', 'vote']
  }
})
```

### Configuration[‚Äã](#configuration "Direct link to Configuration")

* HiveAuth
* HiveSigner

- `name`: Short name of the app. Default: `Aioha Generic App`
- `description` *(optional)*: App description
- `icon` *(optional)*: URL to app icon

Refer to the [official documentation](https://www.npmjs.com/package/hivesigner#init-client) for complete details.

* `app`: HiveSigner app account username. Setup the app account by following the instructions [here](https://docs.hivesigner.com/h/guides/get-started/integrate-hivesigner).
* `callbackURL`: Callback URL. An example HTML page may be found [here](https://github.com/aioha-hive/aioha/blob/main/snippets/hivesigner.html).
* `scope`: Authorized operations HiveSigner may perform on behalf of the user using the access token. A HiveSigner popup window will be shown when performing any operation outside the specified scope.

## Enums[‚Äã](#enums "Direct link to Enums")

* Providers
* KeyTypes
* Asset

The `Providers` enum exported are as follows:

```
export enum Providers {
  Keychain = 'keychain',
  HiveSigner = 'hivesigner',
  HiveAuth = 'hiveauth',
  Ledger = 'ledger',
  PeakVault = 'peakvault',
  MetaMaskSnap = 'metamasksnap',
  ViewOnly = 'viewonly',
  Custom = 'custom'
}
```

The `KeyTypes` enum exported are as follows:

```
export enum KeyTypes {
  Posting = 'posting',
  Active = 'active',
  Owner = 'owner',
  Memo = 'memo'
}
```

The `Asset` enum exported are as follows:

```
export enum Asset {
  HIVE = 'HIVE',
  HBD = 'HBD'
}
```

## Login[‚Äã](#login "Direct link to Login")

info

Also known as **Connect Wallet**.

Login with specified provider and username. A signature request will be made to sign message `msg` using `keyType` key that is associated with the Hive account.

* Usage
* Result

```
const login = await aioha.login(Providers.Keychain, 'hiveusername', {
  msg: 'Hello World',
  keyType: KeyTypes.Posting,
  loginTitle: 'Login',
  paths: ["m/48'/13'/1'/0'/0'"],
  hiveauth: {
    cbWait: (payload, evt, cancel) => {
      // WARNING: will be removed in Aioha v2
    }
  },
  metamask: {
    accountIdx: 0
    validateUser: false
  }
})
```

* `msg`: Message to be signed
* `keyType`: Key type to be used to sign the message
* `loginTitle` *(optional)*: Title to be displayed on certain providers
* `paths` *(optional)*: List of [SLIP-48](https://github.com/satoshilabs/slips/blob/master/slip-0048.md) paths to be used for wallets that support it to skip account search. Usually passed in from [account discovery](#discover-accounts) results.
* `hiveauth.cbWait` *(optional)*: Callback function returning auth payload. It shall display a QR code using `payload` as data to be scanned by a HiveAuth PKSA. Login request may be cancelled before timeout by calling `cancel()`.
* `metamask.accountIdx` *(optional)*: Account index to use for the MetaMask Snap connection. Defaults to 0.
* `metamask.validateUser` *(optional)*: Whether to validate that the Hive account is associated with the public key derived by the MetaMask Snap. Defaults to false.

warning

The `hiveauth.cbWait` callback function is deprecated and will be removed in Aioha v2. Please use the [`hiveauth_login_request` event](/docs/core/jsonrpc.md#hiveauth-login-request) instead.

```
{
  "provider": "keychain",
  "success": true,
  "result": "2020647841097bca7d9e84c39df209ac2df9b42c5b194ee2a690304ce8c140690f5296566b5da0ae9d9950243871bf17fa26b34b671dc8284bf7fba767958a5508",
  "publicKey": "STM5jruaymFQ93jwUp15r9SF5wPeaNvRKFE4nbbJv4vfHCk5a6zRu",
  "username": "randomvlogs"
}
```

* `provider`: Name of provider selected by the user. See [Providers Enum](#enums) above for possibilities.
* `success`: Boolean of whether login is successful or not
* `error`: Error message, if any
* `result`: ECDSA signature (or HiveSigner access token for HiveSigner provider)
* `publicKey`: Public key used to sign the message (*undefined* for HiveSigner provider)
* `username`: Logged in username

## Login and Decrypt Memo[‚Äã](#login-and-decrypt-memo "Direct link to Login and Decrypt Memo")

Not Recommended

Login with signatures [above](#login) are preferred than with memo decryption due to limited support of memo cryptography [in certain providers](/docs.md#feature-matrix).

Login with specified provider and username by decrypting a memo.

* Usage
* Result

```
const login = await aioha.loginAndDecryptMemo(Providers.Keychain, 'hiveusername', {
  msg: 'Hello World',
  keyType: KeyTypes.Posting
})
```

* `msg`: Memo to be decrypted
* `keyType`: Key type to be used to decrypt the message

```
{
  "provider": "keychain",
  "success": true,
  "result": "#Login",
  "username": "randomvlogs"
}
```

* `provider`: Name of provider selected by the user. See [Providers Enum](#enums) above for possibilities.
* `success`: Boolean of whether the memo decryption is successful or not
* `error`: Error message, if any
* `result`: Decrypted message
* `username`: Logged in username

## Login Non-Interactively[‚Äã](#login-non-interactively "Direct link to Login Non-Interactively")

May be used when authentication info (i.e. access token) is already available. This is especially useful for one-click login.

note

Only available in **HiveSigner**.

```
const loginResult = aioha.loginNonInteractive(Providers.HiveSigner, url.searchParams.get('username')!, {
  ignorePersistence: false, // optional, set to true to overwrite persistent logins already stored
  hivesigner: {
    accessToken: 'hivesigner_access_token_here',
    expiry: 123456 // timestamp in seconds
  }
})
```

## Logout[‚Äã](#logout "Direct link to Logout")

info

Also known as **Disconnect Wallet**.

* Current User
* All Users

Logout the current authenticated user.

```
await aioha.logout()
```

Logout the all authenticated users.

```
await aioha.logoutAll()
```

## Switch User[‚Äã](#switch-user "Direct link to Switch User")

Switch the active user to another authenticated user listed [here](#list-other-users). Returns a boolean of whether the operation is successful. If failed, the user will be removed from the list and have to be reauthenticated.

```
aioha.switchUser('user2')
```

## Remove User[‚Äã](#remove-user "Direct link to Remove User")

Remove a user listed [here](#list-other-users). Returns the authentication details of the user removed. Throws an error when the user does not exist.

```
aioha.removeOtherLogin('user2')
```

## Discover Accounts[‚Äã](#discover-accounts "Direct link to Discover Accounts")

Search the wallet provider for available accounts. Returns a map of username to account details which are dependent on the selected provider. Options include specifying roles to search accounts.

Optionally a callback function may be provided to stream discovered accounts. The stop function may be called to halt account discovery and return all accounts discovered so far.

* Usage
* Result
* Stream

```
const discovered = await aioha.discoverAccounts(Providers.Ledger, (stream, stop) => void, { roles: [KeyTypes.Active, KeyTypes.Posting] })
```

```
{
  "success": true,
  "result": {
    "techcoder": [
      {
        "pubkey": "STM6dDqQ4LtL6NRvomWRivRC7fz3VJVvSMWukPVw5Rq4kTi7Bv2dH",
        "path": "m/48'/13'/0'/0'/0'",
        "role": "owner"
      },
      {
        "pubkey": "STM8jWXpM41mZoVRMChR4b6cfZT7c6B1ZSky2URKHAmPrBLAB58MX",
        "path": "m/48'/13'/1'/0'/0'",
        "role": "active"
      },
      {
        "pubkey": "STM6b69oq8QeQU68CYiPYDskvoVnZzL2kyia9L8TiccGU9K7DBZjD",
        "path": "m/48'/13'/4'/0'/0'",
        "role": "posting"
      }
    ],
    "vibecoderx": [
      {
        "pubkey": "STM6oKFjYRcXfWMfvyguvnYPMYAWSXFgYGVgBymcer5EaZWE8dZEv",
        "path": "m/48'/13'/0'/1'/0'",
        "role": "owner"
      },
      {
        "pubkey": "STM7gCJrBZhuiTQ1kwrAC3M17nxeNkK6qAipbZxWtvQbbso8Y6Gs7",
        "path": "m/48'/13'/1'/1'/0'",
        "role": "active"
      },
      {
        "pubkey": "STM71VQTAciufuUYHpyCYqCXxPpp92KHDdAMzD7BdrWJQNPJD1i8v",
        "path": "m/48'/13'/4'/1'/0'",
        "role": "posting"
      }
    ]
  }
}
```

```
{
  "username": "techcoder",
  "pubkey": "STM6b69oq8QeQU68CYiPYDskvoVnZzL2kyia9L8TiccGU9K7DBZjD",
  "path": "m/48'/13'/4'/0'/0'",
  "role": "posting"
}
```

## View Only Mode[‚Äã](#view-only-mode "Direct link to View Only Mode")

View only mode allows logging in with any username to observe any account without signing capabilities. To enable, register the view only provider:

```
aioha.registerViewOnly()
```

Then login as usual:

```
const login = await aioha.login(Providers.ViewOnly, 'alice', {})
```

## Encrypt Memo[‚Äã](#encrypt-memo "Direct link to Encrypt Memo")

Encrypt a message with the Hive public key of the recipient and the private key of the sender.

* Encrypt
* Encrypt With Keys
* Result
* Result With Keys

```
const encrypted = await aioha.encryptMemo('#secret message', KeyTypes.Posting, 'bob')
```

```
const encrypted = await aioha.encryptMemoWithKeys('#secret message', KeyTypes.Posting, ['STM7KP2BCau71s1ihTqBtGiF4VeVWnJevxreNceDyisxGdt1baS4B', 'STM5jruaymFQ93jwUp15r9SF5wPeaNvRKFE4nbbJv4vfHCk5a6zRu'])
```

```
{
  "success": true,
  "result": "#Epz5g29x2Wqt5upn7UkuC4tFrR2zzDMaNFFt1KHFBkTAXnTLcK2jBRCX7FmM3bm3YV2FAShXVXkMY2idqRaDJ2KSLyGPJmYyXoY1JbEoKCLsncRssTxcmLkFiMSiyLeoa"
}
```

```
{
  "success": true,
  "result": {
    "STM7KP2BCau71s1ihTqBtGiF4VeVWnJevxreNceDyisxGdt1baS4B": "#DTq11bwS4Wo5GmYifD4KCrRWpFtr5en4i57cXjZk5rEHfKqQTFEzxS3rYTgCtcdTi83HUuG51gNX9abLQVjAjwJPRAiXkDYqHJ17h3ytsYZ6SyuxjM7YCGmi3BFTg3Bx9",
    "STM5jruaymFQ93jwUp15r9SF5wPeaNvRKFE4nbbJv4vfHCk5a6zRu": "#DTq11bwS4Wo5GmYifD4KCrRWpFtr5en4i57cXjZk5rEHfH2s9YvNHSdcguDyKPs5waCx7RWBS2Qjb5uJ1zeBZSYyWpPW35XrecyGg6hrtjokByZYftCDuzjiNKi42SUr5"
  }
}
```

## Decrypt Memo[‚Äã](#decrypt-memo "Direct link to Decrypt Memo")

Decrypt a Hive memo or message.

* Usage
* Result

```
const decrypted = await aioha.decryptMemo('#encryptedmessage', KeyTypes.Posting)
```

Required arguments include the encrypted message starting with `#` and the `KeyTypes` enum for the key type to be used.

```
{
  "success": true,
  "result": "#Hello World"
}
```

* `success`: Boolean of whether memo decryption is successful or not
* `error`: Error message, if any
* `result`: Decrypted message

## Sign Message[‚Äã](#sign-message "Direct link to Sign Message")

Retrieve an ECDSA signature for a message.

* Usage
* Result

```
const signed = await aioha.signMessage('Message to sign', KeyTypes.Posting)
```

Required arguments include the message to sign and the `KeyTypes` enum for the key type to be used.

```
{
  "success": true,
  "result": "205a8bf065ada352d309c546012b17b4e88f19fdeb704d9a26abe46f1c2f9bce3f4a4b05ffc4777e5005fc5c4b37cd7412a934b7170654df7761310e45cbf6483c",
  "publicKey": "STM5jruaymFQ93jwUp15r9SF5wPeaNvRKFE4nbbJv4vfHCk5a6zRu"
}
```

* `success`: Boolean of whether message has been signed successfully or not
* `error`: Error message, if any
* `result`: ECDSA signature
* `publicKey`: Public key used to sign the message

## Sign Transaction[‚Äã](#sign-transaction "Direct link to Sign Transaction")

Sign a Hive transaction without broadcasting it.

* Usage
* Result

```
const signed = await aioha.signTx({
  "ref_block_num": 27912,
  "ref_block_prefix": 1175138206,
  "expiration": "2024-06-07T10:23:57",
  "operations": [
    [
      "transfer",
      {
        "from": "randomvlogs",
        "to": "randomvlogs",
        "amount": "0.001 HIVE",
        "memo": "Aioha Test"
      }
    ]
  ],
  "extensions": []
}, KeyTypes.Active)
```

Required arguments include the message to sign and the `KeyTypes` enum for the key type to be used (must not be `KeyTypes.Memo`).

important

Due to strict authority checks in HF28, the appropriate `KeyTypes` must be specified for the transaction so that the signature will be created using the correct key. For example, `KeyTypes.Active` must be specified for a transaction containing a transfer operation.

```
{
  "success": true,
  "result": {
    "ref_block_num": 27912,
    "ref_block_prefix": 1175138206,
    "expiration": "2024-06-07T10:23:57",
    "operations": [
      [
        "transfer",
        {
          "from": "randomvlogs",
          "to": "randomvlogs",
          "amount": "0.001 HIVE",
          "memo": "Aioha Test"
        }
      ]
    ],
    "extensions": [],
    "signatures": [
      "20469faba4c128ef41c4e444ef5422e88ed9397d43a7c9713a8e59c170de45eea539b63ced8f4ff048442bdcca3b96848f6f740e655c971f9cae00b54535c8eea0"
    ]
  }
}
```

* `success`: Boolean of whether transaction has been signed successfully or not
* `error`: Error message, if any
* `result`: Full signed transaction

## Sign and Broadcast Transaction[‚Äã](#sign-and-broadcast-transaction "Direct link to Sign and Broadcast Transaction")

Sign and broadcast a Hive transaction.

* Usage
* Result

```
const result = aioha.signAndBroadcastTx([
  ['vote', {
    author: 'sagarkothari88',
    permlink: '2024-06-05-daily-updates-from-sagarkothari88',
    voter: 'techcoderx',
    weight: 10000
  }]
], KeyTypes.Posting)
```

Required arguments include an array of operations for the transaction and the `KeyTypes` enum for the key type to be used (must not be `KeyTypes.Memo`).

important

Due to strict authority checks in HF28, the appropriate `KeyTypes` must be specified for the transaction so that the signature will be created using the correct key. For example, `KeyTypes.Posting` must be specified for a transaction containing a vote operation.

```
{
  "success": true,
  "result": "87c10767531071732fe15e6c34cf275900c342a3"
}
```

* `success`: Boolean of whether transaction has been signed and broadcasted successfully or not
* `error`: Error message, if any
* `result`: Transaction ID

## Sign and Broadcast Hive URI[‚Äã](#sign-and-broadcast-hive-uri "Direct link to Sign and Broadcast Hive URI")

Sign and broadcast a [hive-uri](https://gitlab.syncad.com/hive/hive-uri) encoded transaction.

* Usage
* Result

```
const result = aioha.signAndBroadcastUri('hive://sign/ops/W1sidm90ZSIseyJhdXRob3IiOiJzYWdhcmtvdGhhcmk4OCIsInBlcm1saW5rIjoiMjAyNC0wNi0wNS1kYWlseS11cGRhdGVzLWZyb20tc2FnYXJrb3RoYXJpODgiLCJ2b3RlciI6InRlY2hjb2RlcngiLCJ3ZWlnaHQiOjEwMDAwfV1d', KeyTypes.Posting)
```

Required arguments include `hive://` prefixed URI and the `KeyTypes` enum for the key type to be used (must not be `KeyTypes.Memo`).

```
{
  "success": true,
  "result": "87c10767531071732fe15e6c34cf275900c342a3"
}
```

* `success`: Boolean of whether transaction has been signed and broadcasted successfully or not
* `error`: Error message, if any
* `result`: Transaction ID

## Getters[‚Äã](#getters "Direct link to Getters")

### Registered Providers[‚Äã](#registered-providers "Direct link to Registered Providers")

List all registered providers.

```
aioha.getProviders() // ['keychain', 'peakvault', 'ledger', 'hiveauth', 'hivesigner']
```

### Current Provider[‚Äã](#current-provider "Direct link to Current Provider")

Returns one of the providers above that the user logs in with.

```
aioha.getCurrentProvider()
```

### Current User[‚Äã](#current-user "Direct link to Current User")

Returns logged in Hive username.

```
aioha.getCurrentUser()
```

### Is Logged In[‚Äã](#is-logged-in "Direct link to Is Logged In")

Returns a boolean of whether a user is logged in or not.

```
aioha.isLoggedIn()
```

### Is Provider Registered[‚Äã](#is-provider-registered "Direct link to Is Provider Registered")

Returns a boolean of whether the specified provider is registered. This does not indicate that the said provider is available to the user (i.e. due to required browser extension not installed).

```
aioha.isProviderRegistered(Providers.HiveAuth)
```

### Is Provider Enabled[‚Äã](#is-provider-enabled "Direct link to Is Provider Enabled")

Returns a boolean of whether the specified provider is registered and available for use by the user.

```
aioha.isProviderEnabled(Providers.HiveAuth)
```

### List Other Users[‚Äã](#list-other-users "Direct link to List Other Users")

Returns a list of other authenticated users and the corresponding provider that are currently inactive.

* Usage
* Result

```
aioha.getOtherLogins()
```

```
{
  "user1": "keychain",
  "user2": "peakvault"
}
```

### Get Login Expiration[‚Äã](#get-login-expiration "Direct link to Get Login Expiration")

Retrieve the login expiration timestamp (in epoch milliseconds) for a username.

info

This is for **HiveAuth** and **HiveSigner** providers as the authentication expires. This method will return `undefined` for other providers that do not expire.

```
aioha.getLoginExpiration('someone')
```

## Setters[‚Äã](#setters "Direct link to Setters")

### Set Hive API[‚Äã](#set-hive-api "Direct link to Set Hive API")

Set a Hive API node for RPC calls made by Aioha (i.e. HIVE/VEST calculation, broadcast transaction)

```
aioha.setApi('https://techcoderx.com', [
  'https://api.hive.blog',
  'https://api.openhive.network',
  // ...more fallback nodes
])
```

### Set Magi Network ID[‚Äã](#set-magi-network-id "Direct link to Set Magi Network ID")

Set Magi network ID for Magi related functions.

```
aioha.vscSetNetId('vsc-mainnet')
```

## Operations[‚Äã](#operations "Direct link to Operations")

The return value for these method calls will be equivalent to sign and broadcast transaction result [above](#sign-and-broadcast-transaction).

### Social[‚Äã](#social "Direct link to Social")

* Vote
* Comment
* Delete Comment
* Reblog
* Follow/Ignore

```
const vote = await aioha.vote('author', 'permlink', 10000)
const voteMany = await aioha.voteMany([
  {
    author: 'author1',
    permlink: 'permlink1',
    weight: 10000
  },
  {
    author: 'author2',
    permlink: 'permlink2',
    weight: 5000
  }
])
```

```
const comment = await aioha.comment('pa', 'pp', 'permlink', 'title', 'body', { foo: 'bar' })
const commentWithOptions = await aioha.comment('pa', 'pp', 'permlink', 'title', 'body', { foo: 'bar' }, {
  author: aioha.getCurrentUser(),
  permlink: 'permlink',
  max_accepted_payout: '1000000.000 HBD',
  percent_hbd: 10000,
  allow_votes: true,
  allow_curation_rewards: true,
  extensions: [[0, {
    beneficiaries: [
      {
        account: 'alice',
        weight: 100
      }, {
        account: 'bob',
        weight: 150
      }
    ]
  }]]
})
```

The post or comment must contain no child comments or positive rshares.

```
const deleted = await aioha.deleteComment('permlinktodel')
```

```
const reblog = await aioha.reblog('author', 'permlink', true)
const removeReblog = await aioha.reblog('author', 'permlink', false)
```

```
const follow = await aioha.follow('author', true)
const unfollow = await aioha.follow('author', false)
const ignored = await aioha.ignore('authortoignore')
```

### Custom JSON[‚Äã](#custom-json "Direct link to Custom JSON")

Publish an arbitrary JSON data.

```
const customJson = await aioha.customJSON(KeyTypes.Posting, 'my-id', { foo: 'bar' }, 'Display Title')
```

### Claim Rewards[‚Äã](#claim-rewards "Direct link to Claim Rewards")

Claim Hive rewards that have paid out from content reward pool.

```
const rewardClaim = await aioha.claimRewards()
```

### Transfer[‚Äã](#transfer "Direct link to Transfer")

Transfer HIVE/HBD to another account.

* One Time
* Recurrent

```
// transfer 1 HIVE with memo
const xfer = await aioha.transfer('recipient', 1, Asset.HIVE, 'Transferred using Aioha with memo')

// transfer 1 HBD without memo
const xferNoMemo = await aioha.transfer('recipient2', 1, Asset.HBD)
```

```
// start recurrent transfer of 1 HIVE every 24 hours for 7 days to 'bob'
const recurrentXfer = await aioha.recurrentTransfer('bob', 1, Asset.HIVE, 24, 7, 'Transferred using Aioha with memo')

// cancel HIVE recurrent transfer to 'bob'
const cancelRecurrentXfer = await aioha.cancelRecurrentTransfer('bob', Asset.HIVE, 'Another memo for cancel recurrent transfer')
```

### HIVE staking[‚Äã](#hive-staking "Direct link to HIVE staking")

* Stake
* Unstake
* Delegate

```
// stake 1000 HIVE to itself
const stake = await aioha.stakeHive(1000)

// stake 1000 HIVE to another account
const stakeToOtherAccount = await aioha.stakeHive(1000, 'anotheraccount')
```

```
// unstake 1000 HIVE of vesting shares
const unstake = await aioha.unstakeHive(1000)

// unstake 1 million vesting shares
const unstakeByVests = await aioha.unstakeHiveByVests(1000000)

// cancel unstake
const cancelUnstake = await aioha.unstakeHive(0)
```

```
// delegate 1000 HIVE of vesting shares
const delegate = await aioha.delegateStakedHive('delegatee', 1000)

// delegate 1 million vesting shares
const delegateByVests = await aioha.delegateVests('delegatee', 1000000)

// undelegate from delegatee
const undelegate = await aioha.delegateStakedHive('delegatee', 0)
```

### Governance[‚Äã](#governance "Direct link to Governance")

* Vote Witness
* Vote Proposals
* Set/Clear Proxy

```
const voteWitness = await aioha.voteWitness('thewitness', true)
const unvoteWitness = await aioha.voteWitness('thewitness', false)
```

```
const voteProposals = await aioha.voteProposals([0], true)
const unvoteProposals = await aioha.voteProposals([0], false)
```

```
const setProxy = await aioha.setProxy('proxiedacc')
const clearProxy = await aioha.clearProxy()
```

### Authority[‚Äã](#authority "Direct link to Authority")

* Account Auths
* Key Auths

```
// Add 'aioha' account to posting auths with weight 1
const addAccount = await aioha.addAccountAuthority('aioha', KeyTypes.Posting, 1)

// Remove 'aioha' account from posting auths
const rmAccount = await aioha.removeAccountAuthority('aioha', KeyTypes.Posting)
```

```
// Add 'STMxxxx' public key to posting auths with weight 1
const addKey = await aioha.addKeyAuthority('STMxxxx', KeyTypes.Posting, 1)

// Remove 'STMxxxx' public key from posting auths
const rmKey = await aioha.removeKeyAuthority('STMxxxx', KeyTypes.Posting)
```

### Magi Call[‚Äã](#magi-call "Direct link to Magi Call")

Transact on Magi from L1, such as calling a smart contract, transfer or withdraw L2 balances.

* Transfer
* Withdraw
* Stake
* Unstake
* Call Contract

```
const transfer = await aioha.vscTransfer('hive:bob', 1, Asset.HIVE, 'Optional memo')
```

```
const transfer = await aioha.vscWithdraw('hive:charlie', 1, Asset.HIVE, 'Optional memo')
```

```
// Stake 2,000 HIVE for consensus
const consensusStake = await aioha.vscStake(VscStakeType.Consensus, 2000)

// Stake 100 HBD
const hbdStake = await aioha.vscStake(VscStakeType.HBD, 100)
```

```
// Unstake 2,000 HIVE from consensus
const consensusStake = await aioha.vscUnstake(VscStakeType.Consensus, 2000)

// Unstake 100 HBD
const hbdStake = await aioha.vscUnstake(VscStakeType.HBD, 100)
```

```
// Call testLog at contract vsc1Bp8y... with 100 RC limit, no intents, signed with active authority
const contractCall = await aioha.vscCallContract('vsc1Bp8ykBKDT74vYrZShhfEhp8Mn8bG2ChiAf', 'testLog', 'tx payload', 100, [], KeyTypes.Active)
```


---

# Wax Signer

Aioha may be used to sign transactions on [Wax Typescript](https://gitlab.syncad.com/hive/wax/-/tree/develop/ts?ref_type=heads) library.

note

***Wax*** here refers to the feature-rich multi-language [library](https://gitlab.syncad.com/hive/wax) for [Hive](https://hive.io). Not to be confused with the competing L1 blockchain forked from EOS.

## Usage[‚Äã](#usage "Direct link to Usage")

```
import { createHiveChain } from '@hiveio/wax'
import { initAioha, KeyTypes, WaxAiohaSigner } from '@aioha/aioha'

const aioha = initAioha()
const chain = await createHiveChain()
const tx = await chain.createTransaction()
const provider = WaxAiohaSigner.for(aioha, 'active')

// push some operations here...

await provider.signTransaction(tx)
await chain.broadcast(tx)
```

## Caveats[‚Äã](#caveats "Direct link to Caveats")

Currently most providers produce signatures using the legacy serialization method, while Wax prefers the newer method supported as of HF26 which saves 4 bytes per asset/NAI value in the transaction.

In addition, Aioha primarily uses the legacy transaction JSON format (array tuple of `["operation_name", {...body}]`) while Wax primarily uses the newer JSON format of `{"type": "operation_name", value: {...body}}`.


---

# FAQ

## 1. Why is plaintext private key login not supported?[‚Äã](#1-why-is-plaintext-private-key-login-not-supported "Direct link to 1. Why is plaintext private key login not supported?")

Plaintext private keys are (and should be) a thing of the past, the closest provider would be HiveSigner. Even in web2 passkeys have replaced passwords.

With that said there is a [PlaintextKeyProvider](https://github.com/aioha-hive/aioha/blob/main/src/providers/custom/plaintext.ts) ([usage](/docs/core/custom-provider.md)) but it should only be used for backends.


---

## [üìÑÔ∏è<!-- --> <!-- -->Lit](/docs/framework/lit.md)

[Lit provider for Aioha that uses Lit's context to provide reactive states in your Lit Element components.](/docs/framework/lit.md)


---

# Lit Provider

Lit provider for Aioha that uses Lit's [context](https://lit.dev/docs/data/context) to provide reactive states in your Lit Element components.

## Installation[‚Äã](#installation "Direct link to Installation")

```
pnpm i @aioha/providers @aioha/aioha
```

## Usage[‚Äã](#usage "Direct link to Usage")

1. Initialize Aioha and setup provider at the root of your application. This is usually done at the entrypoint file (i.e. `index.ts` or `my-element.ts`).

src/my-element.ts

```
import { LitElement, html } from 'lit'
import { customElement } from 'lit/decorators.js'
import { Aioha } from '@aioha/aioha'
import '@aioha/providers/lit'

@customElement('my-element')
export class MyElement extends LitElement {
  aioha: Aioha = new Aioha()

  connectedCallback() {
    super.connectedCallback()

    // See options: https://aioha.dev/docs/core/usage#instantiation
    this.aioha.setup()
  }

  render() {
    return html`
      <aioha-provider .aioha=${this.aioha}>
        <the-rest-of-your-app></the-rest-of-your-app>
      </aioha-provider>
    `
  }
}
```

2. Use Aioha anywhere within `<aioha-provider>` through the `@consume` decorator.

src/components/aioha-page.ts

```
import { LitElement, html } from 'lit'
import { customElement, state } from 'lit/decorators.js'
import { consume } from '@lit/context'
import { AiohaCtx, ProviderCtx, UserCtx, OtherUsersCtx } from '@aioha/providers/lit'
import type { Aioha, Providers, PersistentLoginProvs } from '@aioha/aioha'

@customElement('aioha-page')
export class AiohaPage extends LitElement {
  @consume({ context: AiohaCtx })
  @state()
  private aioha?: Aioha

  @consume({ context: UserCtx, subscribe: true })
  @state()
  private _user?: string

  @consume({ context: ProviderCtx, subscribe: true })
  @state()
  private _prov?: Providers

  @consume({ context: OtherUsersCtx, subscribe: true })
  @state()
  private _otherUsers: PersistentLoginProvs = {}

  render() {
    return html`
      <div>
        <p>User: ${this._user} Provider: ${this._prov}</p>
        ${Object.keys(this._otherUsers).map((u) => {
          return html`<p>Other user: ${u} Provider: ${this._otherUsers[u]}</p>`
        })}
      </div>
    `
  }
}
```

## Using Events[‚Äã](#using-events "Direct link to Using Events")

Listen for [events](/docs/core/jsonrpc.md#events) using lifecycle callbacks.

src/components/some-element.ts

```
import { LitElement, html } from 'lit'
import { customElement, state } from 'lit/decorators.js'
import { consume } from '@lit/context'
import { AiohaCtx } from '@aioha/providers/lit'
import { Aioha } from '@aioha/aioha'

@customElement('some-element')
export class SomeElement extends LitElement {
  @consume({ context: AiohaCtx })
  @state()
  private aioha?: Aioha

  private _handler() {
    // handle your event here
  }

  connectedCallback() {
    super.connectedCallback()
    this.aioha!.on('sign_tx_request', this._handler)
  }

  disconnectedCallback() {
    super.disconnectedCallback()
    this.aioha!.off('sign_tx_request', this._handler)
  }

  render() {
    return html`<your-element-contents-here></<your-element-contents-here>`
  }
}
```


---

# React Provider

For React apps that are **not** using the [ready-made UI](/docs/react/ui.md).

note

This module is used and provided in the ready-made UI so there is no need to install this separately.

## Installation[‚Äã](#installation "Direct link to Installation")

```
pnpm i @aioha/providers @aioha/aioha
```

## Usage[‚Äã](#usage "Direct link to Usage")

1. Initialize Aioha and setup the provider at the root of your application. This may be in `index.jsx`, `index.tsx` or `App.tsx` depending on the framework you use.

src/App.tsx

```
import { initAioha } from '@aioha/aioha'
import { AiohaProvider } from '@aioha/providers/react'

// See options: https://aioha.dev/docs/core/usage#instantiation
const aioha = initAioha()

const App = () => {
  return (
    <AiohaProvider aioha={aioha}>
      <TheRestOfYourApplication />
    </AiohaProvider>
  )
}
```

2. Use Aioha anywhere within `AiohaProvider` through `useAioha()`.

src/components/AiohaPage.tsx

```
import { useAioha } from '@aioha/providers/react'

export const AiohaPage = () => {
  const { aioha, user, provider, otherUsers } = useAioha()

  // rest of your page goes here
}
```

Logged in username and provider may be retrieved through `user` and `provider` variables. Other authenticated accounts can be retrieved through `otherUsers` variable.

## Using Events[‚Äã](#using-events "Direct link to Using Events")

Listen for [events](/docs/core/jsonrpc.md#events) in `useEffect` hook.

src/components/YourComponent.tsx

```
import { useEffect } from 'react'
import { useAioha } from '@aioha/providers/react'

export const YourComponent = () => {
  const { aioha } = useAioha()
  useEffect(() => {
    const handler = () => {
      // handle your event here
    }
    aioha.on('sign_tx_request', handler)

    return () => {
      aioha.off('sign_tx_request', handler)
    }
  }, [])
}
```

## SSR Apps[‚Äã](#ssr-apps "Direct link to SSR Apps")

If you are using a framework that uses SSR (server-side rendering) such as Next.js, you may need to setup Aioha separately in a `useEffect()`.

src/App.tsx

```
import React, { useEffect } from 'react'
import { Aioha } from '@aioha/aioha'
import { AiohaProvider } from '@aioha/providers/react'

const aioha = new Aioha()

const App = () => {
  useEffect(() => {
    // See options: https://aioha.dev/docs/core/usage#instantiation
    aioha.setup()
  }, [])
  return (
    <AiohaProvider aioha={aioha}>
      <TheRestOfYourApplication />
    </AiohaProvider>
  )
}
```

## Migrating to >=1.8.0[‚Äã](#migrating-to-180 "Direct link to Migrating to >=1.8.0")

The React provider is now part of a single unified package that consists of all framework providers.

Uninstall the old React provider and install the new package:

```
pnpm un @aioha/react-provider
pnpm i @aioha/providers
```

Update the imports accordingly:

```
// From:
import { AiohaProvider, useAioha } from '@aioha/react-provider'

// To:
import { AiohaProvider, useAioha } from '@aioha/providers/react'
```


---

# Svelte Provider

Svelte provider for Aioha that uses Svelte's [context API](https://svelte.dev/docs/svelte/context) to provide reactive states in your Svelte components.

## Installation[‚Äã](#installation "Direct link to Installation")

```
pnpm i @aioha/providers @aioha/aioha
```

## Usage[‚Äã](#usage "Direct link to Usage")

1. Initialize Aioha and setup provider at the root of your application. This is usually done in `App.svelte`.

src/App.svelte

```
<script lang="ts">
  import { AiohaProvider } from '@aioha/providers/svelte'
  import { initAioha } from '@aioha/aioha'

  const aioha = initAioha()
  // ...
</script>

<AiohaProvider {aioha}>
  <TheRestOfYourApplication />
</AiohaProvider>
```

2. Use Aioha anywhere within `AiohaProvider` through Svelte's `getContext()` function.

src/components/AiohaPage.svelte

```
<script lang="ts">
  import { getContext } from 'svelte'
  import { AiohaCtxKey, type AiohaContext } from '@aioha/providers/svelte'

  const ctx = getContext<AiohaContext>(AiohaCtxKey)
  // ...
</script>

<p>Current User: {ctx.user}</p>
<p>Current Provider: {ctx.provider}</p>
{#each Object.entries(ctx.otherUsers) as [key, value]}
  <p>{key}: {value}</p>
{/each}
```

## Using Events[‚Äã](#using-events "Direct link to Using Events")

Listen for [events](/docs/core/jsonrpc.md#events) using lifecycle functions within Svelte components.

src/components/YourComponent.svelte

```
<script lang="ts">
  import { getContext, onMount } from 'svelte'
  import { AiohaCtxKey, type AiohaContext } from '@aioha/providers/svelte'

  const ctx = getContext<AiohaContext>(AiohaCtxKey)

  const handler = () => {
    // handle your event here
  }

  onMount(() => {
    ctx.aioha.on('sign_tx_request', handler)

    return () => ctx.aioha.off('sign_tx_request', handler)
  })
  // ...
</script>
```

## SSR Apps[‚Äã](#ssr-apps "Direct link to SSR Apps")

If you are using a framework that uses SSR (server-side rendering) such as SvelteKit, you may need to setup Aioha separately in a `onMount()`.

src/App.svelte

```
<script lang="ts">
  import { AiohaProvider } from '@aioha/providers/svelte'
  import { Aioha } from '@aioha/aioha'

  const aioha = new Aioha()

  onMount(() => {
    // See options: https://aioha.dev/docs/core/usage#instantiation
    aioha.setup()
  })
  // ...
</script>

<AiohaProvider {aioha}>
  <TheRestOfYourApplication />
</AiohaProvider>
```


---

# Vue Provider

Vue provider for Aioha that uses Vue's [provide/inject](https://vuejs.org/guide/components/provide-inject.html) to provide reactive states in your Vue components.

## Installation[‚Äã](#installation "Direct link to Installation")

```
pnpm i @aioha/providers @aioha/aioha
```

## Usage[‚Äã](#usage "Direct link to Usage")

1. Initialize Aioha and setup provider at the root of your application. This is usually done in `App.vue`.

src/App.vue

```
<script setup lang="ts">
import { AiohaProvider } from '@aioha/providers/vue'
import { initAioha } from '@aioha/aioha'

const aioha = initAioha()
// ...
</script>

<template>
  <AiohaProvider :aioha="aioha">
    <TheRestOfYourApplication />
  </AiohaProvider>
</template>
```

2. Use Aioha anywhere within `AiohaProvider` through the `useAioha()` composable.

src/components/AiohaPage.vue

```
<script setup lang="ts">
import { useAioha } from '@aioha/providers/vue'

const { aioha, user, provider, otherUsers } = useAioha()
// ...
</script>

<template>
  <p>Current User: {{user}}</p>
  <p>Current Provider: {{provider}}</p>
  <p v-for="(value, key) in otherUsers" :key="key">{{key}}: {{value}}</p>
</template>
```

Alternatively using Vue's `inject()` function:

src/components/AiohaPage.vue

```
<script setup lang="ts">
import { inject } from 'vue'
import { AiohaCtx, UserCtx, ProviderCtx, OtherUsersCtx } from '@aioha/providers/vue'

const aioha = inject(AiohaCtx)
const user = inject(UserCtx)
const provider = inject(ProviderCtx)
const otherUsers = inject(OtherUsersCtx)
// ...
</script>

<template>
  <p>Current User: {{user}}</p>
  <p>Current Provider: {{provider}}</p>
  <p v-for="(value, key) in otherUsers" :key="key">{{key}}: {{value}}</p>
</template>
```

## Using Events[‚Äã](#using-events "Direct link to Using Events")

Listen for [events](https://aioha.dev/docs/core/jsonrpc#events) using lifecycle hooks within Vue's composition API.

src/components/YourComponent.vue

```
<script setup lang="ts">
import { onMounted, onUnmounted } from 'vue'
import { useAioha } from '@aioha/providers/vue'

const { aioha } = useAioha()

const handler = () => {
  // handle your event here
}

onMounted(() => {
  aioha.on('sign_tx_request', handler)
})

onUnmounted(() => {
  aioha.off('sign_tx_request', handler)
})
// ...
</script>
```

## SSR Apps[‚Äã](#ssr-apps "Direct link to SSR Apps")

If you are using a framework that uses SSR (server-side rendering) such as Nuxt, you may need to setup Aioha separately in a `onMounted()`.

src/App.vue

```
<script setup lang="ts">
import { AiohaProvider } from '@aioha/providers/vue'
import { Aioha } from '@aioha/aioha'

const aioha = new Aioha()

onMounted(() => {
  // See options: https://aioha.dev/docs/core/usage#instantiation
  aioha.setup()
})
// ...
</script>

<template>
  <AiohaProvider :aioha="aioha">
    <TheRestOfYourApplication />
  </AiohaProvider>
</template>
```


---

# Media Resources

## Branding[‚Äã](#branding "Direct link to Branding")

* [Logo SVG](https://aioha.dev/img/logo.svg)
* [Social Card](https://aioha.dev/img/aioha-social-card.png) (used in [initial announcement post](https://peakd.com/hive-139531/@aioha/aioha-all-in-one-hive-authentication))
* [Roboto Mono font](https://fonts.google.com/specimen/Roboto+Mono) used in code snippets in Keynotes

## Keynote Slides[‚Äã](#keynote-slides "Direct link to Keynote Slides")

* [HiveFest 9](https://drive.google.com/file/d/17qDTJBQl287PLlHrGSZ8dfL9ZWsDZQWN/view?usp=sharing)
* [HiveFest 10](https://drive.google.com/file/d/1sEIkr0cUQAx9Eqg0XYksLt2Sh0Zvw5KC/view?usp=sharing)


---

# React UI

Opinionated React modal UI for Hive logins through Aioha, styled using [Tailwind CSS](https://tailwindcss.com). This provides a quick and easy way to bootstrap a React web app with ready to use Aioha-powered modal component.

## Installation[‚Äã](#installation "Direct link to Installation")

```
pnpm i @aioha/react-ui @aioha/aioha
```

## Usage[‚Äã](#usage "Direct link to Usage")

1. Initialize Aioha and setup the provider at the root of your application. This may be in index.jsx, index.tsx or App.tsx depending on the framework you use.

info

If you are using a framework that uses SSR (i.e. Next.js), you may need to setup Aioha separately in `useEffect()` as outlined [here](/docs/framework/react.md#ssr-apps).

src/App.tsx

```
import { initAioha } from '@aioha/aioha'
import { AiohaProvider } from '@aioha/react-ui'

// See options: https://aioha.dev/docs/core/usage#instantiation
const aioha = initAioha()

const App = () => {
  return (
    <AiohaProvider aioha={aioha}>
      <TheRestOfYourApplication />
    </AiohaProvider>
  )
}
```

2. Use the modal component and the [`useAioha()` hook](/docs/framework/react.md#usage) anywhere within `AiohaProvider`.

src/components/AiohaPage.tsx

```
import { useState } from 'react'
import { useAioha, AiohaModal } from '@aioha/react-ui'
import { KeyTypes } from '@aioha/aioha'
import { Button, useColorMode } from '@chakra-ui/react'

export const AiohaPage = () => {
  const { colorMode } = useColorMode()
  const [modalDisplayed, setModalDisplayed] = useState(false)
  const { user } = useAioha()
  return (
    <>
      <Button onClick={() => setModalDisplayed(true)}>
        {user ?? 'Connect Wallet'}
      </Button>
      <div className={colorMode}>
        <AiohaModal
          displayed={modalDisplayed}
          loginOptions={{
            msg: 'Login',
            keyType: KeyTypes.Posting
          }}
          onLogin={console.log}
          onClose={setModalDisplayed}
        />
      </div>
    </>
  )
}
```

### Tailwind CSS v4[‚Äã](#tailwind-css-v4 "Direct link to Tailwind CSS v4")

When using the modal in a Tailwind CSS v4 project, add the following `@source` directive to your `index.css` file after the imports:

src/index.css

```
@import 'tailwindcss';
/* ...other imports */

@source '../node_modules/@aioha/react-ui';
```

### Tailwind CSS v3[‚Äã](#tailwind-css-v3 "Direct link to Tailwind CSS v3")

When using the modal in a Tailwind CSS v3 project, add the following `content` in `tailwind.config.js`:

tailwind.config.js

```
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    // ...
    './node_modules/@aioha/react-ui/dist/**/*.{js,ts,jsx,tsx,css}',
    // ...
  ],
  // ...
}
```

### Other[‚Äã](#other "Direct link to Other")

note

As this is a highly-opinionated component library, the appearance may or may not be different than expected due to potential CSS conflicts with the rest of your application.

When not using Tailwind CSS, add the following import to the file where the `AiohaModal` component is used:

```
import { AiohaModal } from '@aioha/react-ui'
import '@aioha/react-ui/dist/build.css'

// rest of your components that uses AiohaModal 
```

## `AiohaModal` Component[‚Äã](#aiohamodal-component "Direct link to aiohamodal-component")

| Property             | Required? | Description                                                                                                                                                                      | Default                    |
| -------------------- | --------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------- |
| `displayed`          | ‚úÖ        | Boolean of whether the modal is displayed.                                                                                                                                       | *false*                    |
| `loginTitle`         | ‚ùå        | Login title to be displayed.                                                                                                                                                     | Connect Wallet             |
| `loginHelpUrl`       | ‚ùå        | Help URL to be linked under provider selection view, if any.                                                                                                                     | *undefined*                |
| `loginOptions`       | ‚úÖ        | Aioha login options. See available configuration [here](/docs/core/usage.md#login).                                                                                              |                            |
| `discOptions`        | ‚ùå        | Account discovery options. See available configuration [here](/docs/core/usage.md#discover-accounts).                                                                            |                            |
| `arrangement`        | ‚ùå        | Display view preference of provider selection. Valid values: `list` and `grid`.                                                                                                  | list                       |
| `onLogin`            | ‚ùå        | Callback function to be called upon successful login, if any. Parameter contains login result as defined [here](/docs/core/usage.md#login).                                      |                            |
| `onClose`            | ‚úÖ        | Function to be called to close the modal.                                                                                                                                        |                            |
| `imageServer`        | ‚ùå        | Image server URL for user avatar.                                                                                                                                                | <https://images.hive.blog> |
| `explorerUrl`        | ‚ùå        | Hive block explorer URL.                                                                                                                                                         | <https://hivehub.dev>      |
| `forceShowProviders` | ‚ùå        | List of `Providers` to force show as login option, which must be registered already. Clicking on unavailable providers displayed will open the URL of the provider landing page. | *\[]*                      |

warning

`hiveauth.cbWait` in `loginOptions` will be overriden as `AiohaModal` will handle the presentation of HiveAuth QR codes.

## HiveSigner Callback Page[‚Äã](#hivesigner-callback-page "Direct link to HiveSigner Callback Page")

The callback page has been provided as a component that you can use in a route, as such:

src/Router.tsx

```
import { createBrowserRouter, RouterProvider } from 'react-router-dom'
import { HiveSignerCb } from '@aioha/react-ui'

const router = createBrowserRouter([
  {
    path: '/',
    element: <HomePage />
  },
  {
    path: '/hivesigner',
    element: <HiveSignerCb />
  },
  // ...rest of your pages
])

const Router = () => {
  return (
    <>
      <RouterProvider router={router} />
    </>
  )
}
```

Then specify the path as the callback URL in `initAioha()`:

```
const aioha = initAioha({
  hivesigner: {
    app: 'ipfsuploader.app',
    callbackURL: window.location.origin + '/hivesigner',
    scope: ['login', 'posting']
  },
  // ...other options
})
```


---

## [üìÑÔ∏è<!-- --> <!-- -->Web Components](/docs/ui/web-components.md)

[The ready made modal UI is available as a framework agnostic web component that can be integrated on vanilla HTML/JS or any web framework.](/docs/ui/web-components.md)


---

# Lit UI

Opinionated Lit modal UI for Hive logins through Aioha, styled using [Tailwind CSS](https://tailwindcss.com). This provides a quick and easy way to bootstrap a Lit web app with ready to use Aioha-powered modal component.

## Installation[‚Äã](#installation "Direct link to Installation")

```
pnpm i @aioha/lit-ui @aioha/aioha
```

## CDN Import[‚Äã](#cdn-import "Direct link to CDN Import")

index.html

```
<script type="module">
  import { initModal } from 'https://unpkg.com/@aioha/lit-ui@latest/dist/bundle.min.js'
</script>
```

## Usage[‚Äã](#usage "Direct link to Usage")

1. Initialize Aioha and setup the provider at the root of your application. This is usually done at the entrypoint file (i.e. `index.ts` or `my-element.ts`).

my-element.ts

```
import { LitElement, html } from 'lit'
import { customElement } from 'lit/decorators.js'
import { Aioha } from '@aioha/aioha'
import '@aioha/lit-ui'

@customElement('my-element')
export class MyElement extends LitElement {
  aioha: Aioha = new Aioha()

  connectedCallback() {
    super.connectedCallback()

    // See options: https://aioha.dev/docs/core/usage#instantiation
    this.aioha.setup()
  }

  render() {
    return html`
      <aioha-provider .aioha=${this.aioha}>
        <the-rest-of-your-app></the-rest-of-your-app>
      </aioha-provider>
    `
  }
}
```

2. Use the modal component and consume the [Lit context](/docs/framework/lit.md#usage) anywhere within `<aioha-provider>`.

aioha-page.ts

```
import { UserCtx } from '@aioha/providers/lit'
import { KeyTypes } from '@aioha/aioha'
import type { LoginResult } from '@aioha/aioha/build/types.js'
import { consume } from '@lit/context'
import { LitElement, html } from 'lit'
import { customElement, state } from 'lit/decorators.js'
import '@aioha/lit-ui'

@customElement('home-page')
export class Homepage extends LitElement {
  @consume({ context: UserCtx, subscribe: true })
  @state()
  private _user?: string

  @state()
  private _aiohaModalDisplayed: boolean

  constructor() {
    super()
    this._aiohaModalDisplayed = false
  }

  private _handleButtonClick() {
    this._aiohaModalDisplayed = true
  }

  render() {
    return html`
      <button type="button" @click="${this._handleButtonClick}">
        ${this._user ?? 'Connect Wallet'}
      </button>
      <aioha-modal
        ?displayed="${this._aiohaModalDisplayed}"
        .loginOptions="${{ msg: 'Hello World', keyType: KeyTypes.Posting }}"
        arrangement="grid"
        .onClose="${() => {
          this._aiohaModalDisplayed = false
        }}"
        .onLogin="${(result: LoginResult) => {
          console.log(result)
        }}"
      >
      </aioha-modal>
    `
  }
}
```

The list of `<aioha-modal>` component properties may be found [here](/docs/ui/web-components.md#initmodal-options).

## Universal Web Component[‚Äã](#universal-web-component "Direct link to Universal Web Component")

The Lit modal UI can be used as a universal web component on vanilla HTML/JS or any other web framework. Details [here](/docs/ui/web-components.md).


---

# Web Components

The ready made modal UI is available as a framework agnostic web component that can be integrated on vanilla HTML/JS or any web framework.

## Installation[‚Äã](#installation "Direct link to Installation")

```
pnpm i @aioha/lit-ui @aioha/aioha
```

## CDN Import[‚Äã](#cdn-import "Direct link to CDN Import")

index.html

```
<script type="importmap">
  {
    "imports": {
      "@aioha/aioha": "https://unpkg.com/@aioha/aioha@latest/dist/bundle.js",
      "@aioha/lit-ui": "https://unpkg.com/@aioha/lit-ui@latest/dist/bundle.min.js"
    }
  }
</script>
```

## Usage[‚Äã](#usage "Direct link to Usage")

index.html

```
<html>
  <body>
    <button id="connectButton" type="button">Connect Wallet</button>
    <div id="loginModal"></div>
  <body>
  <script type="module">
    import { initAioha, KeyTypes } from '@aioha/aioha'
    import { initModal } from '@aioha/lit-ui'

    // Initialize Aioha
    const aioha = initAioha()

    // Initialize modal UI in a div
    const modal = initModal(aioha, document.getElementById('loginModal'), {
      loginOptions: {
        // see available config here: https://aioha.dev/docs/core/usage#login
      }
    })

    // Show modal on button click
    document.getElementById('connectButton').addEventListener('click', () => (modal.displayed = true))
  </script>
</html>
```

Full example usage may be found [here](https://github.com/aioha-hive/lit-ui/blob/main/examples/index.html).

### `initModal` options[‚Äã](#initmodal-options "Direct link to initmodal-options")

| Property             | Description                                                                                                                                                                      | Default                    |
| -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------- |
| `displayed`          | Boolean of whether the modal is displayed.                                                                                                                                       | *false*                    |
| `lightMode`          | Display the modal in light mode.                                                                                                                                                 | *false*                    |
| `loginTitle`         | Login title to be displayed.                                                                                                                                                     | Connect Wallet             |
| `loginHelpUrl`       | Help URL to be linked under provider selection view, if any.                                                                                                                     | *undefined*                |
| `loginOptions`       | Aioha login options. See available configuration [here](/docs/core/usage.md#login).                                                                                              |                            |
| `discOptions`        | Account discovery options for supported providers. Details [here](/docs/core/usage.md#discover-accounts).                                                                        |                            |
| `arrangement`        | Display view preference of provider selection. Valid values: `list` and `grid`.                                                                                                  | list                       |
| `onLogin`            | Callback function to be called upon successful login, if any. Parameter contains login result as defined [here](/docs/core/usage.md#login).                                      |                            |
| `onClose`            | Function to be called to close the modal.                                                                                                                                        |                            |
| `imageServer`        | Image server URL for user avatar.                                                                                                                                                | <https://images.hive.blog> |
| `explorerUrl`        | Hive block explorer URL.                                                                                                                                                         | <https://hivehub.dev>      |
| `forceShowProviders` | List of `Providers` to force show as login option, which must be registered already. Clicking on unavailable providers displayed will open the URL of the provider landing page. | *\[]*                      |

note

`hiveauth.cbWait` in `loginOptions` will be overriden as `AiohaModal` will handle the presentation of HiveAuth QR codes.

info

When `displayed` is specified to a reactive state, use the `onClose` method to set that reactive state to `false` to properly close the modal.

All properties are optional except `loginOptions`.

## HiveSigner Callback[‚Äã](#hivesigner-callback "Direct link to HiveSigner Callback")

The HiveSigner callback component has been provided that you can use in a page, as such:

```
<hivesigner-cb></hivesigner-cb>
```

See full example [here](https://github.com/aioha-hive/lit-ui/blob/main/examples/hivesigner.html).


---

